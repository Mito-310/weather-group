# LINEé€šçŸ¥æ©Ÿèƒ½ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

Arduinoæ¸©æ¹¿åº¦ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰å–å¾—ã—ãŸä¸å¿«æŒ‡æ•°ã«å¿œã˜ã¦ã€LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰è‡ªå‹•ã§è­¦å‘Šé€šçŸ¥ã‚’é€ã‚‹æ©Ÿèƒ½ã®è¨­å®šæ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“‹ ç›®æ¬¡
1. [æ©Ÿèƒ½æ¦‚è¦](#æ©Ÿèƒ½æ¦‚è¦)
2. [LINE Messaging APIã®è¨­å®š](#line-messaging-apiã®è¨­å®š)
3. [ç’°å¢ƒå¤‰æ•°ã®è¨­å®š](#ç’°å¢ƒå¤‰æ•°ã®è¨­å®š)
4. [å‹•ä½œç¢ºèª](#å‹•ä½œç¢ºèª)
5. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ğŸ¯ æ©Ÿèƒ½æ¦‚è¦

### ä¸å¿«æŒ‡æ•°è¨ˆç®—
æ°—æ¸©ã¨æ¹¿åº¦ã‹ã‚‰ä¸å¿«æŒ‡æ•°ã‚’è‡ªå‹•è¨ˆç®—ã—ã€ä»¥ä¸‹ã®åŸºæº–ã§è­¦å‘Šãƒ¬ãƒ™ãƒ«ã‚’åˆ¤å®šã—ã¾ã™ï¼š

- **å®‰å…¨ï¼ˆDI < 70ï¼‰**: é€šå¸¸ã®æ´»å‹•ãŒå¯èƒ½
- **æ³¨æ„ï¼ˆDI 70-75ï¼‰**: ã“ã¾ã‚ãªæ°´åˆ†è£œçµ¦ã‚’æ¨å¥¨
- **è­¦æˆ’ï¼ˆDI 75-80ï¼‰**: ç©æ¥µçš„ãªä¼‘æ†©ã¨æ°´åˆ†è£œçµ¦ãŒå¿…è¦ âš ï¸ **LINEé€šçŸ¥é–‹å§‹**
- **å³é‡è­¦æˆ’ï¼ˆDI 80-85ï¼‰**: æ¿€ã—ã„é‹å‹•ã¯é¿ã‘ã‚‹ ğŸš¨ **LINEé€šçŸ¥**
- **å±é™ºï¼ˆDI 85+ï¼‰**: å¤–å‡ºãƒ»é‹å‹•ã‚’æ§ãˆã‚‹ ğŸ†˜ **LINEé€šçŸ¥**

### LINEé€šçŸ¥ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°
- è­¦æˆ’ãƒ¬ãƒ™ãƒ«ä»¥ä¸Šï¼ˆDI â‰¥ 75 ã¾ãŸã¯ WBGT â‰¥ 28ï¼‰ã«ãªã£ãŸæ™‚
- è­¦å‘Šãƒ¬ãƒ™ãƒ«ãŒå¤‰åŒ–ã—ãŸæ™‚ï¼ˆä¾‹ï¼šè­¦æˆ’â†’å³é‡è­¦æˆ’ï¼‰
- åŒã˜ãƒ¬ãƒ™ãƒ«ã§ã®é€£ç¶šé€ä¿¡ã¯é˜²æ­¢

---

## ğŸ”§ LINE Messaging APIã®è¨­å®š

### 1. LINE Developersã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ãƒãƒ£ãƒãƒ«ä½œæˆ

1. [LINE Developers](https://developers.line.biz/ja/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ã—ã¦ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½œæˆã¾ãŸã¯é¸æŠ
3. ã€Œæ–°è¦ãƒãƒ£ãƒãƒ«ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ã€ŒMessaging APIã€ã‚’é¸æŠ
5. å¿…è¦äº‹é …ã‚’å…¥åŠ›ï¼š
   - ãƒãƒ£ãƒãƒ«å: ä¾‹ã€Œç†±ä¸­ç—‡è­¦å‘Šã‚·ã‚¹ãƒ†ãƒ ã€
   - ãƒãƒ£ãƒãƒ«èª¬æ˜: ä»»æ„
   - ã‚«ãƒ†ã‚´ãƒª: é©åˆ‡ãªã‚‚ã®ã‚’é¸æŠ
   - ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒª: é©åˆ‡ãªã‚‚ã®ã‚’é¸æŠ

### 2. ãƒãƒ£ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—

1. ä½œæˆã—ãŸãƒãƒ£ãƒãƒ«ã®ã€ŒMessaging APIè¨­å®šã€ã‚¿ãƒ–ã‚’é–‹ã
2. ã€Œãƒãƒ£ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆé•·æœŸï¼‰ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€Œç™ºè¡Œã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. è¡¨ç¤ºã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜ï¼ˆå¾Œã§ä½¿ç”¨ï¼‰

### 3. Webhookè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

- ã€ŒWebhookè¨­å®šã€ã§ã€ŒWebhookã®åˆ©ç”¨ã€ã‚’ã‚ªãƒ•ã®ã¾ã¾ã§OKï¼ˆãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã®ã¿ä½¿ç”¨ï¼‰

### 4. å¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨­å®š

1. ã€ŒMessaging APIè¨­å®šã€ã‚¿ãƒ–ã§ï¼š
   - ã€Œå¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚’ã€Œã‚ªãƒ•ã€ã«ã™ã‚‹
   - ã€Œã‚ã„ã•ã¤ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã¯ä»»æ„

### 5. å‹ã ã¡è¿½åŠ ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼IDå–å¾—

#### æ–¹æ³•1: QRã‚³ãƒ¼ãƒ‰ã§å‹ã ã¡è¿½åŠ 
1. ã€ŒMessaging APIè¨­å®šã€ã‚¿ãƒ–ã®ã€ŒQRã‚³ãƒ¼ãƒ‰ã€ã‚’ã‚¹ãƒãƒ›ã§èª­ã¿å–ã‚Š
2. LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‹ã ã¡è¿½åŠ 

#### æ–¹æ³•2: LINE IDã§æ¤œç´¢
1. ã€ŒMessaging APIè¨­å®šã€ã‚¿ãƒ–ã®ã€ŒLINE IDã€ã‚’ãƒ¡ãƒ¢
2. LINEã‚¢ãƒ—ãƒªã§æ¤œç´¢ã—ã¦å‹ã ã¡è¿½åŠ 

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®å–å¾—æ–¹æ³•

**æ¨å¥¨æ–¹æ³•: ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ç¢ºèª**

ä»¥ä¸‹ã®Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ï¼š

```python
from linebot import LineBotApi
from linebot.models import TextSendMessage

# ãƒãƒ£ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š
channel_access_token = 'YOUR_CHANNEL_ACCESS_TOKEN'
line_bot_api = LineBotApi(channel_access_token)

# ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ï¼ˆå…¨å‹ã ã¡ã«é€ä¿¡ï¼‰
line_bot_api.broadcast(TextSendMessage(text='ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'))

# ã¾ãŸã¯ã€ç‰¹å®šã®ã‚¤ãƒ™ãƒ³ãƒˆã§å–å¾—ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™
```

**åˆ¥ã®æ–¹æ³•: WebhookçµŒç”±ã§å–å¾—**
1. ãƒãƒ£ãƒãƒ«ã®ã€ŒWebhookè¨­å®šã€ã‚’æœ‰åŠ¹åŒ–
2. Webhookã®URLã‚’è¨­å®šï¼ˆngrokãªã©ã‚’ä½¿ç”¨ï¼‰
3. LINEãƒœãƒƒãƒˆã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
4. Webhookã‚¤ãƒ™ãƒ³ãƒˆã‹ã‚‰ `userId` ã‚’å–å¾—

---

## âš™ï¸ ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

### 1. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼š

```bash
cp .env.example .env
```

### 2. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†

```bash
# LINE Messaging APIè¨­å®š
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token_here
LINE_USER_ID=your_user_id_here

# ä¸å¿«æŒ‡æ•°ã®è­¦å‘Šé–¾å€¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒã‚ã‚Šã¾ã™ï¼‰
# WARNING_THRESHOLD=80
# SEVERE_WARNING_THRESHOLD=85
# DANGER_THRESHOLD=90
```

**è¨­å®šä¾‹**ï¼š
```bash
LINE_CHANNEL_ACCESS_TOKEN=abcdefghijklmnopqrstuvwxyz1234567890ABCD...
LINE_USER_ID=U1234567890abcdef1234567890abcdef
```

### 3. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install -r requirements.txt
```

ä¸»è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼š
- `line-bot-sdk`: LINE Messaging API SDK
- `python-dotenv`: ç’°å¢ƒå¤‰æ•°ã®èª­ã¿è¾¼ã¿
- `streamlit`: Webã‚¢ãƒ—ãƒªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

---

## âœ… å‹•ä½œç¢ºèª

### 1. Streamlitã‚¢ãƒ—ãƒªã®èµ·å‹•

```bash
streamlit run streamlit_app.py
```

### 2. LINEé€šçŸ¥è¨­å®šã®ç¢ºèª

1. ã‚¢ãƒ—ãƒªã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ã€ŒğŸ“± LINEé€šçŸ¥ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèª
2. **ğŸŸ¢ æœ‰åŠ¹** ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°OK
3. **ğŸ”´ ç„¡åŠ¹** ã®å ´åˆã¯`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šã‚’è¦‹ç›´ã™

### 3. ãƒ†ã‚¹ãƒˆé€šçŸ¥ã®é€ä¿¡

1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ã€ŒğŸ“¨ ãƒ†ã‚¹ãƒˆé€šçŸ¥é€ä¿¡ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. LINEã«é€šçŸ¥ãŒå±Šãã“ã¨ã‚’ç¢ºèª

### 4. å®Ÿéš›ã®è­¦å‘Šé€šçŸ¥ã®ãƒ†ã‚¹ãƒˆ

1. ã€ŒğŸ”Œ ç›£è¦–é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. æ¸©æ¹¿åº¦ãƒ‡ãƒ¼ã‚¿ãŒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã•ã‚Œã¾ã™
3. ä¸å¿«æŒ‡æ•°ãŒè­¦æˆ’ãƒ¬ãƒ™ãƒ«ï¼ˆDI â‰¥ 75ï¼‰ã«é”ã™ã‚‹ã¨è‡ªå‹•ã§LINEé€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã¾ã™

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### LINEé€šçŸ¥ãŒã€ŒğŸ”´ ç„¡åŠ¹ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› ã¨å¯¾å‡¦æ³•**ï¼š
1. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„
   â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
2. ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„
   â†’ `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨˜è¿°ã‚’ç¢ºèªï¼ˆã‚¹ãƒšãƒ¼ã‚¹ã‚„æ”¹è¡Œã«æ³¨æ„ï¼‰
3. ã‚¢ãƒ—ãƒªã‚’å†èµ·å‹•ã—ã¦ã„ãªã„
   â†’ Streamlitã‚¢ãƒ—ãƒªã‚’å†èµ·å‹•ï¼ˆCtrl+Cã§åœæ­¢å¾Œã€å†åº¦`streamlit run`ï¼‰

### ãƒ†ã‚¹ãƒˆé€šçŸ¥ãŒé€ä¿¡ã•ã‚Œãªã„

**ç¢ºèªé …ç›®**ï¼š
1. ãƒãƒ£ãƒãƒ«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ­£ã—ã„ã‹
   â†’ LINE Developersã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å†ç¢ºèª
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒæ­£ã—ã„ã‹
   â†’ LINEãƒœãƒƒãƒˆã‚’å‹ã ã¡è¿½åŠ ã—ã¦ã„ã‚‹ã‹ç¢ºèª
3. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª
   â†’ ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª

### é€šçŸ¥ãŒå±Šã‹ãªã„

**ç¢ºèªé …ç›®**ï¼š
1. LINEã‚¢ãƒ—ãƒªã§é€šçŸ¥è¨­å®šãŒã‚ªãƒ³ã«ãªã£ã¦ã„ã‚‹ã‹
2. LINEãƒœãƒƒãƒˆã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã„ãªã„ã‹
3. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã¯æ­£å¸¸ã‹
4. ãƒãƒ£ãƒãƒ«ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ï¼ˆLINE Developersã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèªï¼‰

### åŒã˜é€šçŸ¥ãŒä½•åº¦ã‚‚å±Šã

**åŸå› **ï¼š
- ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™

**å¯¾å‡¦æ³•**ï¼š
- ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã›ãšã«ä½¿ç”¨ã™ã‚‹
- ã€ŒğŸ—‘ï¸ å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢ã€ã‚’å®Ÿè¡Œã—ã¦ãƒªã‚»ãƒƒãƒˆ

---

## ğŸ“± Arduinoå®Ÿæ©Ÿã¨ã®é€£æº

ç¾åœ¨ã¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€å®Ÿæ©Ÿã®Arduinoã¨é€£æºã™ã‚‹å ´åˆï¼š

### å¿…è¦ãªå¤‰æ›´ç‚¹

1. **`generate_mock_data()`é–¢æ•°ã‚’å®Ÿéš›ã®ã‚»ãƒ³ã‚µãƒ¼èª­ã¿å–ã‚Šé–¢æ•°ã«ç½®ãæ›ãˆ**

```python
# ä¾‹: ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§Arduinoã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—
import serial

def read_arduino_data():
    """Arduinoã‹ã‚‰æ¸©æ¹¿åº¦ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—"""
    ser = serial.Serial('/dev/ttyUSB0', 9600)  # ãƒãƒ¼ãƒˆã¯ç’°å¢ƒã«å¿œã˜ã¦å¤‰æ›´
    line = ser.readline().decode('utf-8').strip()
    temp, humidity = map(float, line.split(','))
    return datetime.now(), temp, humidity
```

2. **`streamlit_app.py`ã®è©²å½“ç®‡æ‰€ã‚’ä¿®æ­£**

```python
# å¤‰æ›´å‰
if st.session_state.is_connected:
    timestamp, temp, humidity = generate_mock_data()
    add_data_point(timestamp, temp, humidity)

# å¤‰æ›´å¾Œ
if st.session_state.is_connected:
    timestamp, temp, humidity = read_arduino_data()
    add_data_point(timestamp, temp, humidity)
```

### Arduinoã‚¹ã‚±ãƒƒãƒä¾‹ï¼ˆDHT22ã‚»ãƒ³ã‚µãƒ¼ä½¿ç”¨ï¼‰

```cpp
#include <DHT.h>

#define DHTPIN 2
#define DHTTYPE DHT22

DHT dht(DHTPIN, DHTTYPE);

void setup() {
  Serial.begin(9600);
  dht.begin();
}

void loop() {
  float humidity = dht.readHumidity();
  float temperature = dht.readTemperature();

  if (!isnan(humidity) && !isnan(temperature)) {
    Serial.print(temperature);
    Serial.print(",");
    Serial.println(humidity);
  }

  delay(2000);  // 2ç§’ã”ã¨ã«æ¸¬å®š
}
```

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [LINE Messaging API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.line.biz/ja/docs/messaging-api/)
- [line-bot-sdk-python GitHub](https://github.com/line/line-bot-sdk-python)
- [Streamlit ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.streamlit.io/)

---

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¨æ³¨æ„äº‹é …

- LINE Messaging APIã®åˆ©ç”¨è¦ç´„ã«å¾“ã£ã¦ãã ã•ã„
- ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã¯æœˆé–“ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ã«åˆ¶é™ãŒã‚ã‚Šã¾ã™ï¼ˆãƒ—ãƒƒã‚·ãƒ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: 200é€š/æœˆï¼‰
- å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã«ã¯ååˆ†æ³¨æ„ã—ã¦ãã ã•ã„
